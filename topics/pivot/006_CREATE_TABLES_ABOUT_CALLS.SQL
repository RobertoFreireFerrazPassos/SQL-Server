-- =============================================
-- Author:      Passos, Roberto
-- Create Date: 10/18/2022
-- Description: Create database and tables about calls
-- =============================================

Create database CALLS
go
use CALLS
go

DROP TABLE IF EXISTS CITY

CREATE TABLE CITY (
	ID INT PRIMARY KEY IDENTITY(1,1),
	CITY_NAME VARCHAR(255)
)
GO

INSERT INTO CITY VALUES('BERLIN')
INSERT INTO CITY VALUES('BELGRADE')
INSERT INTO CITY VALUES('ZAGREB')
INSERT INTO CITY VALUES('NEW YORK')
INSERT INTO CITY VALUES('LOS ANGELES')
INSERT INTO CITY VALUES('WARSAW')
GO

SELECT * 
FROM CITY
GO

DROP TABLE IF EXISTS CUSTOMER

CREATE TABLE CUSTOMER (
	ID INT PRIMARY KEY IDENTITY(1,1),
	CUSTOMER_NAME VARCHAR(255),
	CITY_ID INT FOREIGN KEY REFERENCES CITY(ID)
)
GO

INSERT INTO CUSTOMER VALUES('JEWELRY STONE', 4)
INSERT INTO CUSTOMER VALUES('BAKERY', 1)
INSERT INTO CUSTOMER VALUES('CAFÃ‰', 1)
INSERT INTO CUSTOMER VALUES('RESTAURANT', 3)
GO

SELECT * 
FROM CUSTOMER
GO

DROP TABLE IF EXISTS CALL_OUTCOME

CREATE TABLE CALL_OUTCOME (
	ID INT PRIMARY KEY IDENTITY(1,1),
	OUTCOME_TEXT CHAR(128)
)
GO

INSERT INTO CALL_OUTCOME VALUES('CALL STARTED')
INSERT INTO CALL_OUTCOME VALUES('FINISHED SUCCESFULLY')
INSERT INTO CALL_OUTCOME VALUES('FINISHED UNSUCCESFULLY')
GO

SELECT * 
FROM CALL_OUTCOME
GO

DROP TABLE IF EXISTS CALLS

CREATE TABLE CALLS (
	ID INT PRIMARY KEY IDENTITY(1,1), 
	CUSTOMER_ID INT FOREIGN KEY REFERENCES CUSTOMER(ID),
	CALL_OUTCOME_ID INT FOREIGN KEY REFERENCES CALL_OUTCOME(ID)
)
GO

INSERT INTO CALLS VALUES(4,2)
INSERT INTO CALLS VALUES(2,2)
INSERT INTO CALLS VALUES(3,3)
INSERT INTO CALLS VALUES(1,3)
INSERT INTO CALLS VALUES(3,2)
INSERT INTO CALLS VALUES(2,2)
INSERT INTO CALLS VALUES(4,2)
INSERT INTO CALLS VALUES(1,3)
GO

SELECT * 
FROM CALLS
GO